The bootloader is in [1]. The necessary patch is already applied.

For the developer board compile with 'make Platform=Dev',
for the red ST-Link emulator compile with 'make Platform=Red'
and for the blue ST-Link emulator compile with 'make Platform=Blue'.

The firmware, which gets loaded by the bootloader, has to make an USB reset for 
reenumeration. For this compile the firmware with "make Bootloader=1".

Once the bootloader is flashed, you flash the new firmware like this:
First run /path/FlashDFUSe.sh /path/newFirmware.bin,
then connect the board.

[1] https://github.com/j1rie/maple-bootloader/tree/unify_platforms

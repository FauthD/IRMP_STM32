diff -Nru maple-bootloader-unify_platforms.orig/common.h maple-bootloader-unify_platforms.dev.3k/common.h
--- maple-bootloader-unify_platforms.orig/common.h	2014-05-14 15:45:50.000000000 +0200
+++ maple-bootloader-unify_platforms.dev.3k/common.h	2015-01-19 22:12:28.000000000 +0100
@@ -38,6 +38,7 @@
 #include "stm32f10x_type.h"
 #include "cortexm3_macro.h"
 #include "usb.h"
+#include "dfu.h"
 
 typedef void (*FuncPtr)(void);
 
diff -Nru maple-bootloader-unify_platforms.orig/config.h maple-bootloader-unify_platforms.dev.3k/config.h
--- maple-bootloader-unify_platforms.orig/config.h	2014-05-14 15:45:50.000000000 +0200
+++ maple-bootloader-unify_platforms.dev.3k/config.h	2015-02-21 18:27:54.902569905 +0100
@@ -35,17 +35,17 @@
 
 #ifdef MAPLE
 
-# define LED_BANK GPIOA
-# define LED_RCC_APB2ENR_GPIO RCC_APB2ENR_GPIOA
-# define LED      5
+# define LED_BANK GPIOB
+# define LED_RCC_APB2ENR_GPIO RCC_APB2ENR_GPIOB
+# define LED      13 // toggle LED
 
 # define BUTTON_BANK GPIOC
 # define BUTTON_RCC_APB2ENR_GPIO RCC_APB2ENR_GPIOC
 # define BUTTON      9
 
-# define USB_DISC_BANK GPIOC
-# define USB_DISC_RCC_APB2ENR_GPIO RCC_APB2ENR_GPIOC
-# define USB_DISC      12
+# define USB_DISC_BANK GPIOB
+# define USB_DISC_RCC_APB2ENR_GPIO RCC_APB2ENR_GPIOB
+# define USB_DISC      15
 
 #elif defined MAPLE_MINI
 
@@ -73,7 +73,7 @@
 
 #define USER_CODE_RAM     ((u32)0x20000C00)
 #define RAM_END           ((u32)0x20005000)
-#define USER_CODE_FLASH   ((u32)0x08005000)
+#define USER_CODE_FLASH   ((u32)0x08003000)
 #define FLASH_END         ((u32)0x08020000)
 
 #define VEND_ID0 0xAF
diff -Nru maple-bootloader-unify_platforms.orig/main.c maple-bootloader-unify_platforms.dev.3k/main.c
--- maple-bootloader-unify_platforms.orig/main.c	2014-05-14 15:45:50.000000000 +0200
+++ maple-bootloader-unify_platforms.dev.3k/main.c	2015-01-19 22:18:42.000000000 +0100
@@ -38,13 +38,13 @@
     setupCLK();
     setupLED();
     setupUSB();
-    setupBUTTON();
+    //setupBUTTON();
     setupFLASH();
 
     strobePin(LED_BANK, LED, STARTUP_BLINKS, BLINK_FAST);
 
     /* wait for host to upload program or halt bootloader */
-    bool no_user_jump = !checkUserCode(USER_CODE_FLASH) && !checkUserCode(USER_CODE_RAM) || readPin(BUTTON_BANK, BUTTON);
+    bool no_user_jump = !checkUserCode(USER_CODE_FLASH) && !checkUserCode(USER_CODE_RAM);
     int delay_count = 0;
 
     while ((delay_count++ < BOOTLOADER_WAIT)
diff -Nru maple-bootloader-unify_platforms.orig/usb.c maple-bootloader-unify_platforms.dev.3k/usb.c
--- maple-bootloader-unify_platforms.orig/usb.c	2014-05-14 15:45:50.000000000 +0200
+++ maple-bootloader-unify_platforms.dev.3k/usb.c	2015-02-21 18:49:12.548496151 +0100
@@ -63,6 +63,8 @@
 
     /* initialize the usb application */
     resetPin(USB_DISC_BANK, USB_DISC);  /* present ourselves to the host */
+    strobePin(LED_BANK, LED, 1, BLINK_SLOW); // pull USBDP down for 1 blink
+    setPin(USB_DISC_BANK, USB_DISC);
     usbAppInit();
 }
 
diff -Nru maple-bootloader-unify_platforms.orig/usb_descriptor.c maple-bootloader-unify_platforms.dev.3k/usb_descriptor.c
--- maple-bootloader-unify_platforms.orig/usb_descriptor.c	2014-05-14 15:45:50.000000000 +0200
+++ maple-bootloader-unify_platforms.dev.3k/usb_descriptor.c	2015-02-21 18:27:45.910570425 +0100
@@ -176,7 +176,7 @@
     0x03,
     'D', 0, 'F', 0, 'U', 0, ' ', 0, 'P', 0, 'r', 0, 'o', 0, 'g', 0, 'r', 0,
     'a', 0, 'm', 0, ' ', 0, 'F', 0, 'L', 0, 'A', 0, 'S', 0, 'H', 0, ' ', 0,
-    '0', 0, 'x', 0, '0', 0, '8', 0, '0', 0, '0', 0, '5', 0, '0', 0, '0', 0,
+    '0', 0, 'x', 0, '0', 0, '8', 0, '0', 0, '0', 0, '3', 0, '0', 0, '0', 0,
     '0', 0
 };
 
